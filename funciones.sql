/*1*/
CREATE OR REPLACE PROCEDURE RECETAS_CON_MAS_ESTRELLAS 
IS 
	CURSOR RECEPTA_XEF_CURSOR IS
	SELECT * FROM RECEPTA NATURAL JOIN XEF ORDER BY DIFICULTAT DESC;
	VAR RECEPTA_XEF_CURSOR%ROWTYPE;
BEGIN
	OPEN RECEPTA_XEF_CURSOR;
	DBMS_OUTPUT.PUT_LINE('NOMBRE RECETA | NOMBRE XEF | DIFICULTAT');
	LOOP
		FETCH RECEPTA_XEF_CURSOR INTO VAR;
		EXIT WHEN RECEPTA_XEF_CURSOR%NOTFOUND;
		DBMS_OUTPUT.PUT_LINE(VAR.NOM_RECEPTA || ' | ' || VAR.NOM_XEF || ' | ' || VAR.DIFICULTAT);
	END LOOP;
	CLOSE RECEPTA_XEF_CURSOR;
END;

/*3*/
CREATE OR REPLACE PROCEDURE LAS_TRES_PEORES_RECETAS
IS 
	CURSOR PEORES_CURSOR IS
	SELECT NOM_RECEPTA,NOM_XEF,DIFICULTAT, NOM_INGREDIENT
	FROM RECEPTA NATURAL JOIN XEF NATURAL JOIN INGREDIENT 
	ORDER BY DIFICULTAT;
	VAR PEORES_CURSOR%ROWTYPE;
BEGIN
	OPEN PEORES_CURSOR;
	DBMS_OUTPUT.PUT_LINE('***LAS TRES PREORES RECEPTAS***');
	LOOP
		FETCH PEORES_CURSOR INTO VAR;
		EXIT WHEN PEORES_CURSOR%NOTFOUND;
		DBMS_OUTPUT.PUT_LINE(VAR.NOM_RECEPTA || ' | ' || VAR.NOM_XEF || ' | ' || VAR.NOM_INGREDIENT);
	END LOOP;
	CLOSE PEORES_CURSOR;
END;

/*BLOQUE ANONIMO*/
BEGIN	
	/* EJERCICIO 1:*/ 
	/*RECETAS_CON_MAS_ESTRELLAS();*/
	
	/* EJERCICIO 3:*/
	LAS_TRES_PEORES_RECETAS();
	
END;
